<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PERSAUD AIRLINES PORTAL</title>

  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Persaud-Airlines/flight-planning/refs/heads/main/output-onlinepngtools%20(1).png">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head><body class="bg-blue-50 text-gray-800 font-sans">
<body class="bg-gradient-to-b from-blue-150 to-white text-gray-800 font-sans">


<div class="w-full h-full px-6 py-12">
  <header class="mb-8">
    <h1 class="text-4xl font-bold italic text-gray-900 mb-4">PERSAUD AIRLINES – WingLink</h1>
    <hr class="border-gray-300 mb-4">
    <p class="text-lg text-gray-700 italic">Welcome to the Persaud Airlines Portal, here you can find all the documents and information you need to plan your flights.</p>
  </header>

  <div class="flex flex-col lg:flex-row gap-4">

    <!-- Left Column: Main Document & Buttons -->
    <div class="w-full lg:w-1/2 flex flex-col gap-6">

      <iframe
        src="https://docs.google.com/document/d/17O5D0rol6EfHXXsrdSZbG2p2Eo5OztSICoKN00WyA_Y/preview"
        class="w-full h-[60vh] border border-gray-200 rounded-lg shadow-sm"
        title="WingLink Document Preview">
      </iframe>

      <div class="flex flex-col sm:flex-row gap-4">
        <a href="https://docs.google.com/document/d/17O5D0rol6EfHXXsrdSZbG2p2Eo5OztSICoKN00WyA_Y/export?format=docx" target="_blank" rel="noopener"
          class="inline-flex items-center gap-2 px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-full shadow transition">
          <i class="fa fa-download"></i>
          <span>Download Documents</span>
        </a>
        <a href="https://persaud-airlines.github.io/-/index.html" target="_blank" rel="noopener"
          class="inline-flex items-center gap-2 px-6 py-3 bg-blue-700 hover:bg-blue-600 text-white rounded-full shadow transition">
          <i class="fa fa-globe"></i>
          <span>Visit Website</span>
        </a>
      </div>

      <section>
        <hr class="border-gray-300 mb-4">
        <h2 class="text-2xl font-semibold text-gray-900 mb-4">PA‑28‑161 Documents</h2>
        <div id="docGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
      </section>

    </div>

    <!-- Right Column: 3 Windows -->
    <div class="w-full lg:w-1/2 flex flex-col gap-6">

      <!-- Twosapp Window -->
      <div class="bg-gray-50 border border-gray-200 rounded-lg shadow overflow-hidden">
        <div class="bg-gray-100 px-4 py-2 font-medium text-gray-800 flex items-center justify-between">
          <span>Twosapp</span>
          <a href="https://www.twosapp.com/6907fd284b16be71f422ea90" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Open in new tab</a>
        </div>
        <iframe src="https://www.twosapp.com/6907fd284b16be71f422ea90" class="w-full h-[750px] border-0"></iframe>
      </div>

      <!-- CYSN Aviation Info Window -->
      <div class="bg-gray-50 border border-gray-200 rounded-lg shadow overflow-auto">
        <div class="bg-gray-100 px-4 py-2 font-medium text-gray-800 flex items-center justify-between">
          <span>CYSN Airport Info</span>
        </div>
        <div class="p-4 space-y-4 text-sm">

          <div>
            <h3 class="font-semibold text-gray-900">METAR</h3>
            <pre id="metar" class="bg-gray-100 p-2 rounded text-gray-800">Loading...</pre>
          </div>

          <div>
            <h3 class="font-semibold text-gray-900">TAF</h3>
            <pre id="taf" class="bg-gray-100 p-2 rounded text-gray-800">Loading...</pre>
          </div>

          <div>
            <h3 class="font-semibold text-gray-900">NOTAMs</h3>
            <pre id="notams" class="bg-gray-100 p-2 rounded text-gray-800">Loading...</pre>
          </div>

          <div>
            <h3 class="font-semibold text-gray-900">Airport Diagram</h3>
            <img src="https://www.navcanada.ca/EN/products-and-services/Pages/aeronautical-information/Canadian-Airport-ICAO-Charts.aspx" alt="CYSN Diagram" class="w-full border rounded">
          </div>

          <div>
            <h3 class="font-semibold text-gray-900">Frequencies</h3>
            <pre class="bg-gray-100 p-2 rounded text-gray-800">
ATIS: 128.525
TOWER: 123.250
EMERGENCY: 121.500
            </pre>
          </div>

          <div>
            <h3 class="font-semibold text-gray-900">SIGMETs / AIRMETs</h3>
            <pre id="sigair" class="bg-gray-100 p-2 rounded text-gray-800">Loading...</pre>
          </div>

        </div>
      </div>

      <!-- Wingman Window -->
      <div class="bg-gray-50 border border-gray-200 rounded-lg shadow overflow-hidden">
        <div class="bg-gray-100 px-4 py-2 font-medium text-gray-800 flex items-center justify-between">
          <span>Wingman Reservations</span>
          <a href="https://wingmanreservations.com/login.aspx" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Open in new tab</a>
        </div>
        <iframe src="https://wingmanreservations.com/login.aspx" class="w-full h-[750px] border-0"></iframe>
      </div>

      <!-- YouTube Window -->
      <div class="bg-gray-50 border border-gray-200 rounded-lg shadow overflow-hidden">
        <div class="bg-gray-100 px-4 py-2 font-medium text-gray-800 flex items-center justify-between">
          <span>Jetstream Journeys - YouTube</span>
          <a href="https://youtube.com/@jetstreamjourneys1?si=vqb50WBk4uNxuhAb" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Open in new tab</a>
        </div>
        <iframe src="https://youtube.com/@jetstreamjourneys1?si=vqb50WBk4uNxuhAb" class="w-full h-[750px] border-0"></iframe>
      </div>

    </div>
  </div>

  <footer class="max-w-7xl mx-auto px-6 py-8 text-center text-gray-600 text-sm border-t">
    © 2025 PERSAUD AIRLINES – All rights reserved
  </footer>
</div>

<!-- MODAL -->
<div id="viewerModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-70 p-4">
  <div class="bg-white rounded-lg overflow-hidden w-full max-w-4xl flex flex-col">
    <div class="flex justify-between items-center bg-gray-100 px-4 py-2 border-b">
      <h3 id="modalTitle" class="font-semibold text-gray-900">Preview</h3>
      <div class="flex gap-2">
        <button id="downloadBtn" class="px-3 py-1 bg-gray-800 text-white rounded-full text-sm">Download</button>
        <button id="closeBtn" class="px-3 py-1 bg-gray-400 text-white rounded-full text-sm">Close</button>
      </div>
    </div>
    <div id="modalBody" class="flex-1 p-0">
      <!-- iframe goes here -->
    </div>
  </div>
</div>

<script>
  const AVWX_KEY = "3XSq-UNpoGPuqn9sw_8KmWa2VcpRhUiiZgQaoH--0T8";
  const station = "CYSN";

  async function fetchMetar() {
    try {
      const res = await fetch(`https://avwx.rest/api/metar/${station}?token=${AVWX_KEY}`);
      const data = await res.json();
      document.getElementById("metar").textContent = data.raw || "No METAR available";
    } catch(e) { document.getElementById("metar").textContent = "Error fetching METAR"; }
  }

  async function fetchTaf() {
    try {
      const res = await fetch(`https://avwx.rest/api/taf/${station}?token=${AVWX_KEY}`);
      const data = await res.json();
      document.getElementById("taf").textContent = data.raw || "No TAF available";
    } catch(e) { document.getElementById("taf").textContent = "Error fetching TAF"; }
  }

  async function fetchSigAirmet() {
    try {
      const res = await fetch(`https://avwx.rest/api/forecasts/taf/${station}?token=${AVWX_KEY}`);
      const data = await res.json();
      document.getElementById("sigair").textContent = JSON.stringify(data,null,2) || "No SIGMET/AIRMET available";
    } catch(e) { document.getElementById("sigair").textContent = "Error fetching SIGMET/AIRMET"; }
  }

  fetchMetar(); fetchTaf(); fetchSigAirmet();

  const driveLinks = [
  "https://drive.google.com/file/d/1yttKgC30H--U38Cfj3tC21i5-cf-MYPO/view?usp=drive_link",
      "https://drive.google.com/file/d/1cK3sR8LJKUfuUJzIRrn4p9MOuJ-26seo/view?usp=drive_link",
      "https://drive.google.com/file/d/1Ko45j27UHbekq-YoKGj6yntuAhgSueF3/view?usp=drive_link",
      "https://drive.google.com/file/d/1ajV2M8oN2pQ6KoaGwG1PYeth4TR9L_5C/view?usp=drive_link",
      "https://drive.google.com/file/d/1xFDoSc236nbkvVBJh-9zUcuGEesTGWUZ/view?usp=drive_link",
      "https://drive.google.com/file/d/1MNdNRJwuH8LyE4_ZX0lppfDf9yTBdcZT/view?usp=drive_link",
      "https://drive.google.com/file/d/1c0sminiiHcrEOZlHLOGunsygP0gijlnO/view?usp=drive_link",
      "https://drive.google.com/file/d/1BWA3ohe57pbCbxmzvTkt1z65lHJ2_ZIe/view?usp=drive_link",
      "https://drive.google.com/file/d/1TvdPg2mnho8yavq_iWjHmwDWTTOx2KQA/view?usp=drive_link",
      "https://drive.google.com/file/d/1wZShIVzbH0XoDggCl_T_XobQyOpv7vdK/view?usp=drive_link",
      "https://drive.google.com/file/d/1Uw6CpLgBKxpcsPh2M8MydF2Kmqz-aSr0/view?usp=drive_link",
      "https://drive.google.com/file/d/1jXsJGOwrncJY__S4_Cc9Y57zVNSK32V6/view?usp=drive_link",
      "https://drive.google.com/file/d/1diRa96j1kvQFHdCPlNEa5q9M5SquMZBO/view?usp=drive_link",
      "https://drive.google.com/file/d/1fW5vhaiJMOQ4n9Q2UO_8GUGL-eDyWKCm/view?usp=drive_link",
      "https://drive.google.com/file/d/1XQtDogPgY-o2ph3VhJvCpZLrU_lJH3DC/view?usp=drive_link",
      "https://drive.google.com/file/d/1K-RgcWA0RAEV-KYuD_cvDUm5KB0--g4X/view?usp=drive_link",
      "https://drive.google.com/file/d/1vs2AQK06TncSWdb-p_oK5Cw_929HiRnj/view?usp=drive_link",
      "https://drive.google.com/file/d/1J9DMNxSGC7FLQSb6aytLDNkmuvvkj62L/view?usp=drive_link",
      "https://drive.google.com/file/d/13oNG8fE7lgQbIWYCVBmMLpIUU8iydYpJ/view?usp=drive_link",
      "https://drive.google.com/file/d/1rreY_L-E3YBMAlUvbclh3Uv-MixxyqK6/view?usp=drive_link"
  ];

  function extractFileId(url){const m=url.match(/\/d\/([a-zA-Z0-9_-]+)/);return m?m[1]:null;}
  function drivePreviewUrl(id){return `https://drive.google.com/file/d/${id}/preview`;}
  function driveDownloadUrl(id){return `https://drive.google.com/uc?export=download&id=${id}`;}
  function driveThumbUrl(id){return `https://drive.google.com/thumbnail?authuser=0&sz=w300&id=${id}`;}

  const grid = document.getElementById('docGrid');
  const modal = document.getElementById('viewerModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalBody = document.getElementById('modalBody');
  const downloadBtn = document.getElementById('downloadBtn');
  const closeBtn = document.getElementById('closeBtn');

  function openPreview(fileId,title){
    modalTitle.textContent = title||'Preview';
    modalBody.innerHTML = '';
    const iframe = document.createElement('iframe');
    iframe.src = drivePreviewUrl(fileId);
    iframe.className = 'w-full h-[80vh] border-0';
    modalBody.appendChild(iframe);

    downloadBtn.onclick = ()=>window.open(driveDownloadUrl(fileId),'_blank','noopener');
    modal.classList.remove('hidden'); modal.classList.add('flex');
  }

  function closeModal(){
    modal.classList.remove('flex'); modal.classList.add('hidden');
    modalBody.innerHTML = '';
  }

  closeBtn.addEventListener('click',closeModal);
  modal.addEventListener('click',e=>{if(e.target===modal)closeModal();});
  window.addEventListener('keydown',e=>{if(e.key==='Escape' && modal.classList.contains('flex')) closeModal();});

  driveLinks.forEach((link,idx)=>{
    const id = extractFileId(link);
    const title = `POH - Section ${idx+1}`;
    const card = document.createElement('div');
    card.className='bg-gray-50 rounded-lg shadow hover:shadow-md cursor-pointer overflow-hidden flex flex-col';
    const thumbWrapper = document.createElement('div');
    thumbWrapper.className='h-28 flex items-center justify-center bg-gray-200';
    if(id){
      const img = document.createElement('img');
      img.src = driveThumbUrl(id);
      img.alt = title;
      img.loading='lazy';
      img.className='max-w-full max-h-full object-contain';
      img.onerror = () => { img.remove(); const fallback = document.createElement('i'); fallback.className='fa fa-file-pdf text-gray-400 text-3xl'; thumbWrapper.appendChild(fallback); };
      thumbWrapper.appendChild(img);
    } else {
      const fallback = document.createElement('i');
      fallback.className='fa fa-file-pdf text-gray-400 text-3xl';
      thumbWrapper.appendChild(fallback);
    }
    const titleDiv = document.createElement('div');
    titleDiv.className='p-3 text-center text-gray-900 font-medium';
    titleDiv.textContent = title;
    card.appendChild(thumbWrapper); card.appendChild(titleDiv);
    card.addEventListener('click',()=>openPreview(id,title));
    grid.appendChild(card);
  });
</script>

</body>
</html>
