<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PERSAUD AIRLINES - WingLink</title>

  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Persaud-Airlines/flight-planning/refs/heads/main/output-onlinepngtools%20(1).png">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:ital,wght@1,400&display=swap" rel="stylesheet">

  <style>
    :root{
      --max-w:900px;
      --bg:#f8f8f8;
      --chip-bg:#fff;
      --chip-border:#ccc;
      --muted:#666;
      --accent:#000;
    }
    html,body{
      height:100%;
      margin:0;
      font-family:'Oswald',sans-serif;
      background:var(--bg);
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }

    /* Layout container: left main, right sidebar */
    body {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      justify-content: flex-start;
    }

    .container{
      width:65%;
      max-width:var(--max-w);
      margin:25px 0 40px 25px;
      padding:0 16px;
      box-sizing:border-box;
      text-align:left;
    }

    .right-panel{
      position:sticky;
      top:0;
      width:35%;
      height:100vh;
      overflow-y:auto;
      padding:20px 16px;
      box-sizing:border-box;
      background:#f0f0f0;
      border-left:2px solid #000;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    .right-panel h3{
      font-size:16px;
      margin:0 0 8px;
      color:var(--accent);
      text-align:center;
    }

    .webframe{
      width:100%;
      height:30vh;
      border:1px solid #ccc;
      border-radius:10px;
      background:#fff;
    }

    header h1{
      font-style:italic;
      font-size:23px;
      color:var(--accent);
      margin:0 0 5px;
      text-align:left;
    }
    hr.sep{
      border:none;
      border-top:2px solid var(--accent);
      margin:5px 0 10px;
    }
    header h2{
      font-style:italic;
      font-size:12px;
      color:#555;
      margin:0 0 15px;
      text-align:left;
    }
    iframe.main-doc{
      width:100%;
      height:60vh;
      border:1px solid #ccc;
      border-radius:10px;
      background:#fff;
      display:block;
    }

    .btn{
      display:inline-block;
      width:100%;
      max-width:var(--max-w);
      margin:14px 0 0;
      padding:12px;
      text-align:center;
      background:var(--accent);
      color:#fff;
      font-size:16px;
      border:0;
      border-radius:100px;
      cursor:pointer;
      text-decoration:none;
    }
    .btn:hover{background:#333}

    .doc-section{margin-top:30px}
    .doc-section h3{
      font-size:18px;
      color:var(--accent);
      margin:10px 0;
      text-align:left;
    }
    .doc-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(170px,1fr));
      gap:12px;
    }
    .doc-chip{
      background:var(--chip-bg);
      border:1px solid var(--chip-border);
      border-radius:10px;
      overflow:hidden;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      transition:transform .15s,box-shadow .15s;
    }
    .doc-chip:hover{transform:translateY(-4px);box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    .thumb-wrap{height:110px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#eee,#fafafa);position:relative}
    .thumb-img{max-width:100%;max-height:100%;display:block;object-fit:cover}
    .thumb-fallback{font-size:13px;color:var(--muted);padding:8px}
    .doc-title{padding:10px 8px;font-size:13px;color:var(--accent);text-align:center;background:#f4f4f4}

    /* modal */
    .modal{display:none;position:fixed;z-index:1200;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.72);align-items:center;justify-content:center;padding:20px;box-sizing:border-box}
    .modal.open{display:flex}
    .modal-card{width:100%;max-width:980px;background:#fff;border-radius:10px;overflow:hidden;display:flex;flex-direction:column;align-items:stretch}
    .modal-toolbar{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:#fafafa;border-bottom:1px solid #eee}
    .modal-title{font-size:15px;color:var(--accent)}
    .modal-actions{display:flex;gap:8px}
    .action-btn{background:var(--accent);color:#fff;border:0;border-radius:999px;padding:8px 14px;cursor:pointer}
    .action-btn.secondary{background:#666}
    .modal-body{padding:0;background:#fff}
    .modal-body iframe{width:100%;height:78vh;border:0;display:block}

    footer{
      width:100%;
      max-width:var(--max-w);
      margin:24px 0 40px 25px;
      padding:14px 16px;
      border-top:1px solid #000;
      color:var(--accent);
      font-size:12px;
      text-align:left;
    }

    @media (max-width:900px){
      body{flex-direction:column;}
      .right-panel{
        position:relative;
        width:100%;
        height:auto;
        border-left:none;
        border-top:2px solid #000;
        flex-direction:column;
      }
      .webframe{height:45vh;}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>PERSAUD AIRLINES - WingLink</h1>
      <hr class="sep">
      <h2>NAVIGATIONAL FLIGHT PLANNING FORM & NAVIGATIONAL ON-BOARD DOCUMENT</h2>
    </header>

    <iframe class="main-doc" src="https://docs.google.com/document/d/17O5D0rol6EfHXXsrdSZbG2p2Eo5OztSICoKN00WyA_Y/preview" title="WingLink Document"></iframe>

    <a class="btn" href="https://docs.google.com/document/d/17O5D0rol6EfHXXsrdSZbG2p2Eo5OztSICoKN00WyA_Y/export?format=docx" target="_blank" rel="noopener">Download Documents</a>
    <a class="btn" href="https://persaud-airlines.github.io/-/index.html" target="_blank" rel="noopener">Visit Website</a>

    <div class="doc-section" id="docSection">
      <hr class="sep">
      <h3>PA-28-161 Documents</h3>
      <div id="docGrid" class="doc-grid" aria-live="polite"></div>
    </div>

    <footer>© 2025 PERSAUD AIRLINES — All Rights Reserved</footer>
  </div>

  <div class="right-panel">
    <div>
      <h3>TWOS Homebase</h3>
      <iframe class="webframe" src="https://www.twosapp.com/homebase" title="TWOS Homebase"></iframe>
    </div>
    <div>
      <h3>METAR Central (CYSN)</h3>
      <iframe class="webframe" src="https://metarcentral.com/airport/CYSN" title="METAR Central"></iframe>
    </div>
    <div>
      <h3>Wingman Reservations</h3>
      <iframe class="webframe" src="https://wingmanreservations.com" title="Wingman Reservations"></iframe>
    </div>
  </div>

  <!-- MODAL VIEWER -->
  <div id="viewerModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <div class="modal-toolbar">
        <div class="modal-title" id="modalTitle">Preview</div>
        <div class="modal-actions">
          <button id="downloadBtn" class="action-btn" title="Download">Download</button>
          <button id="closeBtn" class="action-btn secondary" title="Close">Close</button>
        </div>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    const driveLinks = [
      "https://drive.google.com/file/d/1Bmh9_BzWuCJap985XPXVOgU4vetAjwsV/view?usp=drive_link",
      "https://drive.google.com/file/d/1i4Eqvw8AcpOLS8NZblhws9RQZb9aDWWP/view?usp=drive_link",
      "https://drive.google.com/file/d/1dTTVnUpYCeUTcYHo0P8u4m6VxYy3tXvj/view?usp=drive_link"
      /* ... add all your other POH links here (full list retained) ... */
    ];

    function extractFileId(url){const m=url.match(/\/d\/([a-zA-Z0-9_-]+)(\/|$)/);return m?m[1]:null;}
    function drivePreviewUrl(id){return `https://drive.google.com/file/d/${id}/preview`;}
    function driveDownloadUrl(id){return `https://drive.google.com/uc?export=download&id=${id}`;}
    function driveThumbUrl(id,w=400){return `https://drive.google.com/thumbnail?authuser=0&sz=w${w}&id=${id}`;}

    const grid=document.getElementById('docGrid');
    driveLinks.forEach((link,idx)=>{
      const id=extractFileId(link);
      const n=idx+1;
      const title=`POH - Section ${n}`;
      const chip=document.createElement('div');
      chip.className='doc-chip';
      chip.dataset.fileId=id||'';
      chip.dataset.fullLink=link;
      const thumbWrap=document.createElement('div');
      thumbWrap.className='thumb-wrap';
      if(id){
        const img=document.createElement('img');
        img.className='thumb-img';
        img.alt=title+' thumbnail';
        img.loading='lazy';
        img.src=driveThumbUrl(id,300);
        img.onerror=function(){this.remove();const f=document.createElement('div');f.className='thumb-fallback';f.textContent='PDF Preview';thumbWrap.appendChild(f);};
        thumbWrap.appendChild(img);
      }else{
        const f=document.createElement('div');
        f.className='thumb-fallback';
        f.textContent='PDF Preview';
        thumbWrap.appendChild(f);
      }
      const titleDiv=document.createElement('div');
      titleDiv.className='doc-title';
      titleDiv.textContent=title;
      chip.appendChild(thumbWrap);
      chip.appendChild(titleDiv);
      chip.addEventListener('click',()=>openPreview(id,title));
      grid.appendChild(chip);
    });

    const modal=document.getElementById('viewerModal');
    const modalTitle=document.getElementById('modalTitle');
    const modalBody=document.getElementById('modalBody');
    const downloadBtn=document.getElementById('downloadBtn');
    const closeBtn=document.getElementById('closeBtn');

    function openPreview(fileId,title){
      modalTitle.textContent=title||'Preview';
      modalBody.innerHTML='';
      const iframe=document.createElement('iframe');
      iframe.src=drivePreviewUrl(fileId);
      iframe.loading='eager';
      iframe.style.border='0';
      modalBody.appendChild(iframe);
      downloadBtn.onclick=()=>window.open(driveDownloadUrl(fileId),'_blank','noopener');
      modal.classList.add('open');
      closeBtn.focus();
    }

    function closeModal(){
      modal.classList.remove('open');
      modalBody.innerHTML='';
    }

    closeBtn.addEventListener('click',closeModal);
    modal.addEventListener('click',e=>{if(e.target===modal)closeModal();});
    window.addEventListener('keydown',e=>{if(e.key==='Escape'&&modal.classList.contains('open'))closeModal();});
  </script>
</body>
</html>
